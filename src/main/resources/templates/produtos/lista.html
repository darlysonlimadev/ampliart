<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org" th:replace="~{fragmentos/layout :: layout(~{::section})}">
    <section>
        <div class="flex items-center justify-between mb-6">
            <h1 class="text-2xl font-semibold">Produtos</h1>
            <a class="px-4 py-2 rounded bg-slate-900 text-white" th:href="@{/produtos/novo}">Novo produto</a>
        </div>

        <form class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" method="get" th:action="@{/produtos}">
            <input class="border rounded px-3 py-2" type="text" name="nome" placeholder="Buscar por nome" th:value="${nome}" />
            <input class="border rounded px-3 py-2" type="text" name="codigo" placeholder="Codigo exato" th:value="${codigo}" />
            <select class="border rounded px-3 py-2" name="ativo">
                <option value="" th:selected="${ativo == null}">Todos</option>
                <option value="true" th:selected="${ativo == true}">Ativos</option>
                <option value="false" th:selected="${ativo == false}">Inativos</option>
            </select>
            <button class="px-4 py-2 rounded bg-slate-700 text-white" type="submit">Filtrar</button>
        </form>

        <div class="bg-white shadow rounded">
            <table class="min-w-full">
                <thead>
                <tr class="text-left border-b">
                    <th class="p-3">Nome</th>
                    <th class="p-3">Codigo</th>
                    <th class="p-3">Categoria</th>
                    <th class="p-3">Preco venda</th>
                    <th class="p-3">Estoque</th>
                    <th class="p-3">Ativo</th>
                    <th class="p-3">Acoes</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="produto : ${produtos}" class="border-b">
                    <td class="p-3" th:text="${produto.nome}"></td>
                    <td class="p-3" th:text="${produto.codigo}"></td>
                    <td class="p-3" th:text="${produto.categoria != null ? produto.categoria.nome : '-'}"></td>
                    <td class="p-3" th:text="${produto.precoVenda}"></td>
                    <td class="p-3" th:text="${produto.quantidadeEstoque}"></td>
                    <td class="p-3" th:text="${produto.ativo}"></td>
                    <td class="p-3 space-x-2">
                        <a class="text-slate-700" th:href="@{/produtos/{id}(id=${produto.id})}">Detalhes</a>
                        <a class="text-slate-900" th:href="@{/produtos/{id}/editar(id=${produto.id})}">Editar</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
</html>
